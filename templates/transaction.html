{% extends "base.html" %}
{% block title %}Transactions{% endblock %}

{% block content %}
<div class="card">
  <div class="row" style="margin-bottom:10px;">
    <div>
      <h2 style="margin:0;font-size:26px;font-weight:950;"><span class="silver-run">Transactions</span></h2>
      <div class="muted">Latest 20 records</div>
    </div>
    <span class="badge">Balance: Rs {{ request.user.balance|default:"0" }}</span>
  </div>

  <div style="overflow:auto;border-radius:16px;border:1px solid rgba(255,255,255,.16);">
    <table style="width:100%;border-collapse:collapse;">
      <thead>
        <tr style="background:rgba(0,0,0,.22);">
          <th style="text-align:left;padding:10px 12px;font-size:12px;opacity:.9;">DATE</th>
          <th style="text-align:left;padding:10px 12px;font-size:12px;opacity:.9;">TYPE</th>
          <th style="text-align:right;padding:10px 12px;font-size:12px;opacity:.9;">AMOUNT</th>
        </tr>
      </thead>
      <tbody>
        {% if txs %}
          {% for t in txs %}
            <tr style="border-top:1px solid rgba(255,255,255,.12);">
              <td style="padding:10px 12px;font-size:13px;white-space:nowrap;">
                {{ t.created_at|date:"Y-m-d H:i" }}
              </td>
              <td style="padding:10px 12px;font-size:13px;">
                {{ t.get_tx_type_display }}
                {% if t.note %}<div class="muted" style="font-size:12px;">{{ t.note }}</div>{% endif %}
              </td>
              <td style="padding:10px 12px;font-size:13px;text-align:right;">
                Rs {{ t.amount }}
              </td>
            </tr>
          {% endfor %}
        {% else %}
          <tr>
            <td colspan="3" style="padding:14px;text-align:center;opacity:.8;">No transactions yet.</td>
          </tr>
        {% endif %}
      </tbody>
    </table>
  </div>

  <div style="margin-top:14px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap;">
    <a class="btn btn-ghost" href="/profile/">Back</a>
    <a class="btn btn-primary" href="/dashboard/">Dashboard</a>
  </div>
</div>
{% endblock %}
